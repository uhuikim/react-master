# useState

## useState(initialState)

`initialState`

- ì´ˆê¸°ì— stateë¥¼ ì„¤ì •í•œ ê°’.
- ê°’ì€ ëª¨ë“  ë°ì´í„° íƒ€ì…ì´ í—ˆìš©ë˜ì§€ë§Œ, í•¨ìˆ˜ì— ëŒ€í•´ì„œëŠ” íŠ¹ë³„í•œ ë™ì‘ì´ ìˆë‹¤.
- ì´ˆê¸° ë Œë”ë§ ì´í›„ì—ëŠ” ë¬´ì‹œê°€ ëœë‹¤.
[propsë¥¼ stateë¡œ ì„¤ì •í•˜ë©´ ì•ˆë˜ëŠ” ì´ìœ ](https://react-ko.dev/learn/choosing-the-state-structure#don-t-mirror-props-in-state)

`initialStateë¡œ í•¨ìˆ˜ê°€ ë„˜ì–´ì˜¤ëŠ” ê²½ìš°`

í•¨ìˆ˜ë¥¼ InitialStateë¡œ ì „ë‹¬í•˜ë©´ ì´ë¥¼ ì´ˆê¸°í™” í•¨ìˆ˜ë¡œ ì·¨ê¸‰í•œë‹¤.

1. ìˆœìˆ˜í•´ì•¼í•¨
2. ì¸ìë¥¼ ë°›ìœ¼ë©´ ì•ˆëœë‹¤.
3. ë°˜ë“œì‹œ ì–´ë–¤ ê°’ì„ ë°˜í™˜í•´ì•¼í•œë‹¤.

reactëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ˆê¸°í™” í•  ë•Œ ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³ , ê·¸ ë°˜í™˜ê°’ì„ ì´ˆê¸° stateë¡œ ì €ì¥í•œë‹¤.

## ë°˜í™˜ê°’

```jsx
const [age, setAge] = useState(28);
```

- state : ì²« ë²ˆì§¸ ë Œë”ë§ ì¤‘ì—ëŠ” ì „ë‹¬í•œ InitialStateì™€ ì¼ì¹˜í•œë‹¤.
- set ì„¤ì •ì í•¨ìˆ˜ : ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ ì´‰ë°œí•œë‹¤.

## ì£¼ì˜ì‚¬í•­

- useStateëŠ” í›…ì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì´ë‚˜ ì§ì ‘ ë§Œë“  í›…ì—ì„œë§Œ í˜¸ì¶œ í•  ìˆ˜ ìˆë‹¤.
- ë°˜ë³µë¬¸ì´ë‚˜ ì¡°ê±´ë¬¸ì•ˆì—ì„œëŠ” í˜¸ì¶œ í•  ìˆ˜ ì—†ë‹¤.

## set ì„¤ì •ì í•¨ìˆ˜

stateë¥¼ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ ì´‰ë°œ í•  ìˆ˜ ìˆë‹¤.

```jsx
const [name, setName] = useState('Edward');

function handleClick() {
  setName('Taylor');
  setAge(a => a + 1);
  // ...
```

### ë§¤ê°œë³€ìˆ˜

ëª¨ë“  ë°ì´í„° íƒ€ì…ì˜ ê°’ê³¼ í•¨ìˆ˜ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤. 

`ì—…ë°ì´í„° í•¨ìˆ˜`

í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ë©´ ì—…ë°ì´í„° í•¨ìˆ˜ë¡œ ì·¨ê¸‰ëœë‹¤. 

- ëŒ€ê¸°ì¤‘ì¸ stateë¥¼ ìœ ì¼í•œ ì¸ìˆ˜ë¡œ ì‚¬ìš©
- ë‹¤ìŒ state ë°˜í™˜

`ì—…ë°ì´í„° í•¨ìˆ˜ ë™ì‘`

- ReactëŠ” ì—…ë°ì´í„° í•¨ìˆ˜ë¥¼ ëŒ€ê¸°ì—´ì— ë„£ê³  ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§ í•œë‹¤.
- ë Œë”ë§ ì¤‘ì— ReactëŠ” ëŒ€ê¸°ì—´ì— ìˆëŠ” ëª¨ë“  ì—…ë°ì´í„°ë¥¼ ì´ì „ stateì— ì ìš©í•˜ì—¬ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•œë‹¤.

### ì£¼ì˜ì‚¬í•­

- set í•¨ìˆ˜ëŠ” ë‹¤ìŒ ë Œë”ë§ì— ëŒ€í•œ state ë³€ìˆ˜ë§Œ ì—…ë°ì´íŠ¸í•œë‹¤.set í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ í›„ì—ë„ state ë³€ìˆ˜ì—ëŠ” ì—¬ì „íˆ ì´ì „ ê°’ì´ ë‹´ê²¨ì ¸ ìˆë‹¤.
    
    ```jsx
    function handleClick() {
      setName('Robin');
      console.log(name); // Still "Taylor"!
    }
    
    // ë‹¤ìŒ stateë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ê²½ìš°, set í•¨ìˆ˜ì— ì „ë‹¬í•˜ê¸° ì „ ë³€ìˆ˜ì— ì €ì¥í•˜ê¸°
    const nextCount = count + 1;
    setCount(nextCount);
    
    console.log(count);     // 0
    console.log(nextCount); // 1
    ```
    
- ì‚¬ìš©ìê°€ ì œê³µí•œ ìƒˆë¡œìš´ ê°’ì´ Object.isì— ì˜í•´ í˜„ì¬ stateì™€ ë™ì¼í•˜ë‹¤ê³  íŒì •ë˜ë©´, reactëŠ” ì»´í¬ë„ŒíŠ¸ì™€ ê·¸ ìì‹ë“¤ì„ ë¦¬ë Œë”ë§í•˜ì§€ ì•ŠëŠ”ë‹¤.
    
    ```jsx
    obj.x = 10;  // ğŸš© ì˜ëª»ëœ ë°©ë²•: ê¸°ì¡´ ê°ì²´ë¥¼ ë³€ì´    
    setObj(obj); // ğŸš© ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    
    // âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: ìƒˆë¡œìš´ ê°ì²´ ìƒì„±
    setObj({
      ...obj,
      x: 10
    });
    ```
    
- reactëŠ” state ì—…ë°ì´íŠ¸ë¥¼ ì¼ê´„ì²˜ë¦¬í•œë‹¤. ëª¨ë“  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë˜ê³  set í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ í›„ì— í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•œë‹¤.
- DOMì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ Reactê°€ í™”ë©´ì„ ë” ì¼ì° ì—…ë°ì´íŠ¸í•˜ë„ë¡ ê°•ì œí•´ì•¼ í•˜ëŠ” ê²½ìš°, flushSyncë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ë Œë”ë§ ë„ì¤‘ set í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ í˜„ì¬ ë Œë”ë§ ì¤‘ì¸ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œë§Œ í—ˆìš©ëœë‹¤. ì´ ê²½ìš° ReactëŠ” í•´ë‹¹ ì¶œë ¥ì„ ë²„ë¦¬ê³  ì¦‰ì‹œ ìƒˆë¡œìš´ stateë¡œ ë‹¤ì‹œ ë Œë”ë§ì„ ì‹œë„í•œë‹¤.

## ì´ì „ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ state ì—…ë°ì´íŠ¸í•˜ê¸°

```jsx
const [age, setAge] = useState(42);

function handleClick() {
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
}
```

set í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ë„ ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ ì½”ë“œì—ì„œ age state ë³€ìˆ˜ê°€ ì—…ë°ì´íŠ¸ ë˜ì§€ ì•ŠëŠ”ë‹¤. 

`ì—…ë°ì´í„° í•¨ìˆ˜`

```jsx
function handleClick() {
  setAge(a => a + 1); // setAge(42 => 43)
  setAge(a => a + 1); // setAge(43 => 44)
  setAge(a => a + 1); // setAge(44 => 45)
}
```

- ì´ í•¨ìˆ˜ëŠ” ëŒ€ê¸° ì¤‘ì¸ stateë¥¼ ê°€ì ¸ì™€ì„œ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

### í•­ìƒ ì—…ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì„ê¹Œ?

- ê¼­ ê·¸ë˜ì•¼í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ì„ í•˜ë©´ í•´ë‹¹ stateì—ëŠ” ê°’ì´ ë°˜ì˜ì´ ë˜ì–´ìˆì„ ê²ƒì´ë¼ ë‹¤ìŒ í•¸ë“¤ëŸ¬ì—ì„œëŠ” ë¬¸ì œ ì—†ì´ ì‘ë™í•  ê²ƒì´ë‹¤.
- ì˜ì¡´ì„±ì„ íƒˆí”¼í•˜ê³  ì‹¶ì„ ê²½ìš°ì—ë„ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.
- ë™ì¼í•œ ì´ë²¤íŠ¸ ë‚´ì—ì„œ ì—¬ëŸ¬ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì—ëŠ” ì—…ë°ì´í„°ê°€ ë„ì›€ì´ ëœë‹¤.
- state ë³€ìˆ˜ ìì²´ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì–´ë ¤ìš´ ê²½ìš°ì—ë„ ìœ ìš©í•˜ë‹¤.
- ì½”ë“œì˜ ì¼ê´€ì„±ì„ ìœ„í•´ ì´ì „ stateê°€ ì‚¬ìš© ë  ê²½ìš° ì—…ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í•©ë¦¬ì ì´ë‹¤.

## ê°ì²´ ë° ë°°ì—´ state ì—…ë°ì´íŠ¸

- reactì—ì„œ stateëŠ” ì½ê¸° ì „ìš©ìœ¼ë¡œ ê°„ì£¼ë˜ë¯€ë¡œ ê¸°ì¡´ ê°ì²´ë¥¼ ë³€ì´í•˜ì§€ ì•Šê³ , êµì²´ë¥¼ í•´ì•¼í•œë‹¤.

```jsx
// ğŸš© state ì•ˆì— ìˆëŠ” ê°ì²´ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë³€ì´í•˜ì§€ ë§ˆì„¸ìš”: 
form.firstName = 'Taylor';

// âœ… ìƒˆë¡œìš´ ê°ì²´ë¡œ state êµì²´í•©ë‹ˆë‹¤
setForm({
  ...form,
  firstName: 'Taylor'
});
```

## ì´ˆê¸° state ë‹¤ì‹œ ìƒì„±í•˜ì§€ ì•Šê¸°

```jsx
// ëª¨ë“  ë Œë”ë§ì—ì„œ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
const [todos, setTodos] = useState(createInitialTodos());
// ì´ˆê¸°í™” í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ë¼
const [todos, setTodos] = useState(createInitialTodos);
```

`createInitialTodos()`ì˜ ê²°ê³¼ëŠ” ì´ˆê¸° ë Œë”ë§ì—ë§Œ ì‚¬ìš©ë˜ì§€ë§Œ, ì—¬ì „íˆ ëª¨ë“  ë Œë”ë§ì—ì„œ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ëœë‹¤.

ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì „ë‹¬í•´ë¼!

í•¨ìˆ˜ë¥¼ useStateì— ì „ë‹¬í•˜ë©´ ReactëŠ” ì•Œì•„ì„œ ì´ˆê¸°í™” ì¤‘ì—ë§Œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

## keyë¡œ state ì¬ì„¤ì •í•˜ê¸°

ì»´í¬ë„ŒíŠ¸ì— ë‹¤ë¥¸ keyë¥¼ ì „ë‹¬í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì˜ stateë¥¼ ì¬ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

keyê°€ ë³€ê²½ë˜ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ìƒì„±í•˜ë¯€ë¡œ stateê°€ ì´ˆê¸°í™” ëœë‹¤.

## ì´ì „ ë Œë”ë§ì—ì„œ ì–»ì€ ì •ë³´ ì €ì¥í•˜ê¸°

í¬ê·€í•˜ê²Œ ë Œë”ë§ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ stateë¥¼ ì¡°ì •í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. 

ex) countê°€ ë§ˆì§€ë§‰ ë³€ê²½ ì´í›„ ì¦ê°€ ë˜ëŠ” ê°ì†Œí–ˆëŠ”ì§€ í‘œì‹œí•˜ê³  ì‹¶ì€ ê²½ìš°

```jsx
export default function CountLabel({ count }) {
	// propsë¡œ ë°›ì€ ì´ì „ countê°’ì„ ì €ì¥í•œë‹¤.
	const [prevCount, setPrevCount] = useState(count);
	// countì˜ ì¦ê°€ ë˜ëŠ” ê°ì†Œ ì—¬ë¶€ ì¶”ì 
	const [trend, setTrend] = useState(null);
	  
	if (prevCount !== count) {
	    setPrevCount(count);
	    setTrend(count > prevCount ? 'increasing' : 'decreasing');
	  }

  return (
    <>
      <h1>{count}</h1>
      {trend && <p>The count is {trend}</p>}
    </>
  );
}
```

ë Œë”ë§ í•˜ëŠ” ë™ì•ˆ setí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸°

- prevCount !== count ì™€ ê°™ì€ ì¡°ê±´ì´ ì—†ì„ ê²½ìš° ë¦¬ë Œë”ë§ì„ ë°˜ë³µí•˜ë‹¤ í„°ì§ˆ ê²ƒì´ë‹¤.
- ì˜¤ì§ í˜„ì¬ ë Œë”ë§ ì¤‘ì¸ ì»´í¬ë„ŒíŠ¸ì˜ stateë§Œ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆë‹¤. ë Œë”ë§ ì¤‘ì— ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ set í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ì—ëŸ¬ë‹¤.
- ë Œë”ë§ ë„ì¤‘ set í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ReactëŠ” ì»´í¬ë„ŒíŠ¸ê°€ return ë¬¸ìœ¼ë¡œ ì¢…ë£Œëœ ì§ í›„, ìì‹ì„ ë Œë”ë§í•˜ê¸° ì „ì— í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§ í•œë‹¤. ë”°ë¼ì„œ, Effectì—ì„œ stateë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ë‚«ë‹¤.

ë Œë”ë§ í•˜ì§€ ì•ŠëŠ” ì• ë“¤ì„ stateë¡œ ë‘ëŠ” ê²ƒì€ íš¨ìœ¨ì ì´ì§€ ì•Šë‹¤. ë¦¬íŒ©í† ë§ì„ í•´ë³´ì.

```jsx
export default function CountLabel({ count }) {
	const prev = useRef(count)
	
	useEffect(()=>{
		prev.current = count;
	},[count])

	const trend = count > prev.current ? 'increasing' : 'decreasing'
  return (
    <>
      <h1>{count}</h1>
      {trend && <p>The count is {trend}</p>}
    </>
  );
}

```

## state ê°’ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì„¤ì •í•˜ê³  ì‹¶ì€ ê²½ìš°

```jsx
const [fn, setFn] = useState(someFunction);

function handleClick() {
  setFn(someOtherFunction);
}

```

í•¨ìˆ˜ë¥¼ ê°’ìœ¼ë¡œ ì „ë‹¬í•˜ë©´ ReactëŠ” someFunctionì„ ì´ˆê¸°í™” í•¨ìˆ˜ë¡œ ì—¬ê¸°ê³ , someOtherFunctionì€ ì—…ë°ì´í„° í•¨ìˆ˜ë¼ê³  ë°›ì•„ë“¤ì´ë©°, ë”°ë¼ì„œ ì´ë“¤ì„ í˜¸ì¶œí•´ì„œ ê·¸ ê²°ê³¼ë¥¼ ì €ì¥í•˜ë ¤ê³  ì‹œë„í•œë‹¤. ì •ë§ë¡œ í•¨ìˆ˜ë¥¼ ì €ì¥í•˜ê¸¸ ì›í•œë‹¤ë©´, ë‘ ê²½ìš° ëª¨ë‘ í•¨ìˆ˜ ì•ì— () =>ë¥¼ ë„£ì–´ì•¼ í•œë‹¤. ê·¸ëŸ¬ë©´ ReactëŠ” ì „ë‹¬í•œ í•¨ìˆ˜ë¥¼ ê°’ìœ¼ë¡œì¨ ì €ì¥í•œë‹¤.

```jsx
const [fn, setFn] = useState(() => someFunction);

function handleClick() {
  setFn(() => someOtherFunction);
}
```